#side Sector Tender
	#author AgentE382
	#date 4-16-2013
	#seed 1
	#color 0F0
	
	#code
		#const control-channel 1
		#const position-advertisement 1
		#const position-advertisement-length 3
		#const origin-announcement 2
		#const origin-announcement-length 3
	#type Starter
	#decoration 6F0 circle
	#hardware
		processor 1
		bomb 2500
	#code
		#var received-positions
		#vector origin
		
		#start
			position position-advertisement position-advertisement-length control-channel send
			id 1 = nif
				do
					control-channel receive
					dup 0 = nif
						swap origin-announcement = if
							drop
							origin!
							1
						else
							1 - dropn
							0
						then
					then
				until-loop
			else
				do
					control-channel receive
					swap position-advertisement = if
						drop
						origin v+ origin!
						received-positions 1 + received-positions!
					else
						1 - dropn
					then
				received-positions type type-population = until-loop
				origin type type-population vs/ origin!
				origin origin-announcement origin-announcement-length control-channel send
			then
#end